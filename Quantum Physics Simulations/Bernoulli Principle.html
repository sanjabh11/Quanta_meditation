<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bernoulli's Principle Interactive</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background-color: #0a0a0a;
    color: #00ff00;
    height: 100%;
    display: flex;
  }
  .container {
    display: flex;
    width: 100%;
    height: 100%;
  }
  .sidebar {
    width: 300px;
    padding: 20px;
    background-color: #111;
    overflow-y: auto;
  }
  .main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
  }
  h1 {
    text-align: center;
    color: #ff00ff;
    font-size: 1.5em;
    margin-bottom: 20px;
  }
  .visualization {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #bernoulli-sketch {
    width: 100%;
    max-width: 800px;
    height: 500px;
    margin-bottom: 20px;
  }
  .controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
  }
  button {
    background-color: #4CAF50;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 14px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 5px;
  }
  #toggle-explanation {
    background-color: #008CBA;
  }
  .explanation {
    color: #00aaff;
    font-size: 14px;
    line-height: 1.6;
  }
  .key-concept {
    color: #ffff00;
  }
  .equation {
    font-style: italic;
    color: #ff00ff;
    text-align: center;
    margin: 10px 0;
  }
</style>
</head>
<body>
<div class="container">
  <div class="sidebar">
  <h1>Bernoulli's Principle</h1>
  <button id="toggle-explanation" onclick="toggleExplanation()">Show Explanation</button>
  <div class="explanation" id="explanation" style="display: none;">
    <p>Bernoulli's Principle states that an increase in the speed of a fluid occurs simultaneously with a decrease in pressure or a decrease in the fluid's potential energy. This principle is fundamental in understanding fluid dynamics and has numerous applications in aerodynamics and hydrodynamics.</p>
    
    <p class="key-concept">Key Concepts:</p>
    <ul>
      <li>As fluid velocity increases, pressure decreases</li>
      <li>Energy is conserved in a fluid system</li>
      <li>The principle applies to both liquids and gases</li>
    </ul>
    
    <p class="equation">p + ½ρv² + ρgh = constant</p>
    
    <p>Where:</p>
    <ul>
      <li>p = pressure</li>
      <li>ρ = density</li>
      <li>v = velocity</li>
      <li>g = gravitational acceleration</li>
      <li>h = height</li>
    </ul>
    
    <p>In the visualization:</p>
    <ul>
      <li>Blue particles represent fluid flow</li>
      <li>Yellow arrows indicate velocity (longer = faster)</li>
      <li>Red dots represent pressure (more intense = higher pressure)</li>
      <li>The narrow section demonstrates increased velocity and decreased pressure</li>
    </ul>
  </div>
  <script>
    function toggleExplanation() {
      const explanation = document.getElementById('explanation');
      const button = document.getElementById('toggle-explanation');
      if (explanation.style.display === 'none') {
        explanation.style.display = 'block';
        button.textContent = 'Hide Explanation';
      } else {
        explanation.style.display = 'none';
        button.textContent = 'Show Explanation';
      }
    }
  </script>
</div>
  <div class="main-content">
    <div class="visualization">
      <div id="bernoulli-sketch"></div>
      <div class="controls">
        <button id="toggle-animation">Pause</button>
        <button id="toggle-streamlines">Toggle Streamlines</button>
        <button id="toggle-pressure">Toggle Pressure</button>
      </div>
    </div>
  </div>
</div>

<script>
let isAnimating = true;
let showStreamlines = true;
let showPressure = true;
let particles = [];
let narrowPoint;

function setup() {
  let canvas = createCanvas(800, 500);
  canvas.parent('bernoulli-sketch');
  narrowPoint = width / 2;
  for (let i = 0; i < 300; i++) {
    particles.push(new Particle());
  }
}

function draw() {
  background(10, 10, 10);
  
  // Draw pipe
  drawPipe();
  
  // Update and display particles
  for (let particle of particles) {
    if (isAnimating) {
      particle.update();
    }
    particle.display();
  }
  
  // Display streamlines
  if (showStreamlines) {
    drawStreamlines();
  }
  
  // Display pressure indicators
  if (showPressure) {
    displayPressure();
  }
  
  // Display velocity indicators
  displayVelocity();
}

function drawPipe() {
  noFill();
  stroke(0, 255, 0);
  strokeWeight(2);
  beginShape();
  curveVertex(0, 100);
  curveVertex(0, 100);
  curveVertex(narrowPoint - 150, 100);
  curveVertex(narrowPoint, 250);
  curveVertex(narrowPoint + 150, 400);
  curveVertex(width, 400);
  curveVertex(width, 400);
  endShape();
  
  beginShape();
  curveVertex(0, 400);
  curveVertex(0, 400);
  curveVertex(narrowPoint - 150, 400);
  curveVertex(narrowPoint, 250);
  curveVertex(narrowPoint + 150, 100);
  curveVertex(width, 100);
  curveVertex(width, 100);
  endShape();
}

function drawStreamlines() {
  stroke(0, 100, 255, 50);
  noFill();
  for (let y = 120; y <= 380; y += 40) {
    beginShape();
    for (let x = 0; x <= width; x += 10) {
      let yOffset = map(x, 0, width, 0, sin((x - width/2) * 0.01) * 150);
      curveVertex(x, y + yOffset);
    }
    endShape();
  }
}

function displayPressure() {
  noStroke();
  for (let x = 0; x <= width; x += 20) {
    let y = map(sin((x - width/2) * 0.01), -1, 1, 100, 400);
    let pressureColor = color(255, 0, 0);
    pressureColor.setAlpha(map(abs(y - 250), 0, 150, 50, 200));
    fill(pressureColor);
    ellipse(x, y, 10, 10);
  }
}

function displayVelocity() {
  stroke(255, 255, 0);
  strokeWeight(2);
  for (let x = 20; x < width; x += 40) {
    let y = map(sin((x - width/2) * 0.01), -1, 1, 100, 400);
    let arrowLength = map(abs(y - 250), 0, 150, 30, 10);
    line(x, y, x + arrowLength, y);
    let arrowSize = map(abs(y - 250), 0, 150, 8, 4);
    triangle(x + arrowLength, y, x + arrowLength - arrowSize, y - arrowSize/2, x + arrowLength - arrowSize, y + arrowSize/2);
  }
}

class Particle {
  constructor() {
    this.reset();
  }
  
  reset() {
    this.x = random(-50, 0);
    this.y = random(100, 400);
    this.speed = random(1, 3);
    this.size = map(this.speed, 1, 3, 2, 5);
  }
  
  update() {
    this.x += this.speed;
    
    let targetY = map(sin((this.x - width/2) * 0.01), -1, 1, 100, 400);
    this.y = lerp(this.y, targetY, 0.1);
    this.speed = map(abs(targetY - 250), 0, 150, 5, 2);
    
    if (this.x > width) {
      this.reset();
    }
  }
  
  display() {
    noStroke();
    let c = color(0, 255, 255);
    c.setAlpha(150);
    fill(c);
    ellipse(this.x, this.y, this.size);
  }
}

// Controls
const toggleAnimationButton = document.getElementById('toggle-animation');
const toggleStreamlinesButton = document.getElementById('toggle-streamlines');
const togglePressureButton = document.getElementById('toggle-pressure');

function toggleAnimation() {
  isAnimating = !isAnimating;
  toggleAnimationButton.textContent = isAnimating ? 'Pause' : 'Play';
}

function toggleStreamlines() {
  showStreamlines = !showStreamlines;
  toggleStreamlinesButton.textContent = showStreamlines ? 'Hide Streamlines' : 'Show Streamlines';
}

function togglePressure() {
  showPressure = !showPressure;
  togglePressureButton.textContent = showPressure ? 'Hide Pressure' : 'Show Pressure';
}

toggleAnimationButton.addEventListener('click', toggleAnimation);
toggleStreamlinesButton.addEventListener('click', toggleStreamlines);
togglePressureButton.addEventListener('click', togglePressure);
</script>

</body></html>
